# –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê - –ì–ï–ô–ú–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–ê–Ø –û–ë–†–ê–ó–û–í–ê–¢–ï–õ–¨–ù–ê–Ø –ü–õ–ê–¢–§–û–†–ú–ê

*–°–æ–∑–¥–∞–Ω–æ: 05.01.2025*
*–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ–¥–µ–Ω: Claude Opus 4*

## üéØ –ö–û–ù–¶–ï–ü–¶–ò–Ø –ü–†–û–ï–ö–¢–ê

**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –≥–µ–π–º–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º AI-–æ–±—É—á–µ–Ω–∏–µ–º
- **–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è**: –£—á–∏—Ç–µ–ª—è + —É—á–µ–Ω–∏–∫–∏ (–ª—é–±—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –Ω–µ —Ç–æ–ª—å–∫–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞)
- **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: 
  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —É—á–µ–Ω–∏–∫–æ–º
  - Boss battles –≤ –∫–æ–Ω—Ü–µ —Ç–µ–º  
  - AI-—Ç—å—é—Ç–æ—Ä –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏
  - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —É—á–∏—Ç–µ–ª—è –Ω–∞–¥ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
  - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- **–Ø–∑—ã–∫–∏**: –†—É—Å—Å–∫–∏–π (–æ—Å–Ω–æ–≤–Ω–æ–π) + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã–π)

## ‚úÖ –ß–¢–û –£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **JWT —Ç–æ–∫–µ–Ω—ã** —Å refresh token rotation (15 –º–∏–Ω access, 7 –¥–Ω–µ–π refresh)
- **–†–æ–ª–∏**: TEACHER / STUDENT —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–π
- **Rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- **bcrypt** –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- **Token blacklist** –¥–ª—è –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- **CORS** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤

### üë• –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–æ—Ñ–∏–ª–µ–π
- **User –º–æ–¥–µ–ª—å** —Å –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **Teacher/Student –ø—Ä–æ—Ñ–∏–ª–∏** (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ)
- **–°–≤—è–∑—å Teacher ‚Üî Student** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è)

### üí¨ –ß–∞—Ç —Å–∏—Å—Ç–µ–º–∞ (–†–ê–ë–û–¢–ê–ï–¢!)
- **WebSocket** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Socket.IO
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** –¥–ª—è —Å–æ–∫–µ—Ç–æ–≤
- **–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **–°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω**
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø—Ä–æ—á—Ç–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤

### ü§ñ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **OpenAI API** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (GPT-4)
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–π —Å —É—á–µ—Ç–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞
  - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å —É—á–µ–Ω–∏–∫–∞
- **Leonardo AI** –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–π
  - –°–∏—Å—Ç–µ–º–∞ polling –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Prisma)
```prisma
‚úÖ User (id, email, password, role, firstName, lastName)
‚úÖ Teacher (userId)  
‚úÖ Student (userId, teacherId?)
‚úÖ Message (content, senderId, receiverId, read, readAt)
‚úÖ Story (chapter, text, prompt, studentId)
‚úÖ GeneratedImage (url, prompt, storyId)
‚úÖ Goal (title, studentId)
‚úÖ RoadmapEntry (topic, order, startAt, finished, studentId)
‚úÖ Badge (title, status, studentId)
‚úÖ BossBattle (lives, timeLimitSec, difficulty, prompt)
‚úÖ TokenBlacklist (token, expiresAt)
```

### üéÆ –ë–∞–∑–æ–≤–∞—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Badge —Å–∏—Å—Ç–µ–º–∞** (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- **Goal –º–æ–¥–µ–ª—å** (—Ü–µ–ª–∏ —É—á–µ–Ω–∏–∫–∞)
- **RoadmapEntry** (–ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è)
- **BossBattle –º–æ–¥–µ–ª—å** (–≥–æ—Ç–æ–≤–∞, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)

### üñ•Ô∏è Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **React 18 + TypeScript**
- **Redux Toolkit** + RTK Query –¥–ª—è API
- **Tailwind CSS** –¥–ª—è —Å—Ç–∏–ª–µ–π
- **React Router** —Å –∑–∞—â–∏—â–µ–Ω–Ω—ã–º–∏ —Ä–æ—É—Ç–∞–º–∏
- **–ì–æ—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**:
  - ‚úÖ LoginPage, RegisterPage
  - ‚úÖ StudentDashboard, TeacherDashboard  
  - ‚úÖ Chat (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç)
  - ‚ö†Ô∏è StoryGenerator (UI –≥–æ—Ç–æ–≤, –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
  - ‚ö†Ô∏è MathProblemSolver (UI –≥–æ—Ç–æ–≤, mock –¥–∞–Ω–Ω—ã–µ)

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–ê–ì–ò (–ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨!)

### Backend –ø—Ä–æ–±–ª–µ–º—ã:

1. **auth.middleware.ts:25** - Async —Ñ—É–Ω–∫—Ü–∏—è –±–µ–∑ await
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
const decoded = verifyToken(token);
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
const decoded = await verifyToken(token);
```

2. **leonardo.service.ts:15** - –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ API –∫–ª—é—á–∞
```typescript
// ‚ùå –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç LEONARDO_API_KEY
headers: { 'Authorization': `Bearer ${config.leonardo.apiKey}` }
```

3. **websocket.service.ts:45** - –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
```typescript
// ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
const decoded = authVerifyToken(token) as { userId: string; role: 'STUDENT' | 'TEACHER' } | null;
```

4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π** - –ï—Å—Ç—å –¥–≤–µ –ø–∞–ø–∫–∏ migrations —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏

### Frontend –ø—Ä–æ–±–ª–µ–º—ã:

5. **StoryGenerator.tsx** - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ API
6. **MathProblemSolver.tsx** - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç mock –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API
7. **–ù–µ—Ç error boundaries** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ React –æ—à–∏–±–æ–∫
8. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç loading —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üîß –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï

### üö® –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏ (1-2 –¥–Ω—è)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å async/await –≤ auth.middleware.ts
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ leonardo.service.ts
- [ ] –£–ª—É—á—à–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é WebSocket
- [ ] –ü–æ—á–∏—Å—Ç–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å StoryGenerator –∫ API
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å MathProblemSolver

### üåç –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (2-3 –¥–Ω—è)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å react-i18next
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ /locales/ru.json, /locales/en.json
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ –≤ Layout
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ UI —Ç–µ–∫—Å—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è nameEn, titleEn –≤ –ë–î

### üìö –ü–†–ò–û–†–ò–¢–ï–¢ 3: –°–∏—Å—Ç–µ–º–∞ –∫—É—Ä—Å–æ–≤ (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (Subject, Course, Topic, Section, Lesson)
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫—É—Ä—Å–æ–≤ –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É—Ä–æ–∫–æ–≤ –∏–∑ –±–ª–æ–∫–æ–≤
- [ ] AI –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### üéÆ –ü–†–ò–û–†–ò–¢–ï–¢ 4: –ü–æ–ª–Ω–∞—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)
- [ ] –°–∏—Å—Ç–µ–º–∞ –æ–ø—ã—Ç–∞ –∏ —É—Ä–æ–≤–Ω–µ–π
- [ ] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å –≤—ã–±–æ—Ä–∞–º–∏
- [ ] Boss battles —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –ø—Ä–µ–¥–º–µ—Ç—ã
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ö–û–î–ê - –ì–î–ï –ß–¢–û –ú–ï–ù–Ø–¢–¨

### Backend (/tutor-game/backend/src/)
```
controllers/          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ auth.controller.ts      # ‚úÖ –ì–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ student.controller.ts   # ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
‚îú‚îÄ‚îÄ teacher.controller.ts   # ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª  
‚îî‚îÄ‚îÄ generate.controller.ts  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ auth.service.ts         # ‚úÖ –ì–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ openai.service.ts       # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îú‚îÄ‚îÄ leonardo.service.ts     # üö® –ù—É–∂–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ websocket.service.ts    # üö® –ù—É–∂–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

routes/               # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ auth.routes.ts          # ‚úÖ –ì–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ student.routes.ts       # ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–µ —Ä–æ—É—Ç—ã
‚îú‚îÄ‚îÄ teacher.routes.ts       # ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–µ —Ä–æ—É—Ç—ã
‚îî‚îÄ‚îÄ generate.routes.ts      # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

middlewares/          # Middleware
‚îú‚îÄ‚îÄ auth.middleware.ts      # üö® –ë–ê–ì–ò! –ò—Å–ø—Ä–∞–≤–∏—Ç—å async/await
‚îî‚îÄ‚îÄ error.middleware.ts     # ‚úÖ –ë–∞–∑–æ–≤—ã–π

prisma/
‚îî‚îÄ‚îÄ schema.prisma          # ‚ö†Ô∏è –ù—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á
```

### Frontend (/tutor-game/frontend/src/)
```
features/             # Redux —Å–ª–∞–π—Å—ã –∏ API
‚îú‚îÄ‚îÄ auth/                   # ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ authSlice.ts
‚îÇ   ‚îî‚îÄ‚îÄ authApi.ts
‚îî‚îÄ‚îÄ chat/                   # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
    ‚îî‚îÄ‚îÄ Chat.tsx

pages/                # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ LoginPage.tsx           # ‚úÖ –ì–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ RegisterPage.tsx        # ‚úÖ –ì–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ student/
‚îÇ   ‚îú‚îÄ‚îÄ StudentDashboard.tsx    # ‚úÖ –ë–∞–∑–æ–≤—ã–π UI
‚îÇ   ‚îú‚îÄ‚îÄ StoryGenerator.tsx      # üö® –ù–ï –ü–û–î–ö–õ–Æ–ß–ï–ù –∫ API
‚îÇ   ‚îî‚îÄ‚îÄ MathProblemSolver.tsx   # üö® MOCK –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ teacher/
    ‚îú‚îÄ‚îÄ TeacherDashboard.tsx    # ‚úÖ –ë–∞–∑–æ–≤—ã–π UI
    ‚îî‚îÄ‚îÄ StudentProgress.tsx     # ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–π

components/common/    # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ Layout.tsx             # ‚úÖ –ì–æ—Ç–æ–≤, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞

api/
‚îî‚îÄ‚îÄ client.ts              # ‚úÖ Axios –∫–ª–∏–µ–Ω—Ç –≥–æ—Ç–æ–≤
```

## üöÄ QUICK WINS (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é)

### –î–µ–Ω—å 1-2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å auth.middleware.ts** - –¥–æ–±–∞–≤–∏—Ç—å await –∫ verifyToken
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å leonardo.service.ts** - –ø—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
3. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å StoryGenerator** –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É API
4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å MathProblemSolver** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API

### –î–µ–Ω—å 3-4: –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å i18next** –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
2. **–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã** –¥–ª—è –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤
3. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞** –≤ Layout
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤

### –î–µ–Ω—å 5-7: –£–ª—É—á—à–µ–Ω–∏–µ UX
1. **–î–æ–±–∞–≤–∏—Ç—å loading —Å–ø–∏–Ω–Ω–µ—Ä—ã** –≤–æ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
2. **Error boundaries** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
3. **–£–ª—É—á—à–∏—Ç—å UI** –¥–∞—à–±–æ—Ä–¥–æ–≤
4. **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

## üí° –°–û–í–ï–¢–´ –î–õ–Ø –ù–û–í–´–• –ß–ê–¢–û–í

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏:
1. –ù–∞—á–Ω–∏ —Å auth.middleware.ts:25 - –¥–æ–±–∞–≤—å await
2. –ü—Ä–æ–≤–µ—Ä—å leonardo.service.ts - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
3. –ü–æ—Å–º–æ—Ç—Ä–∏ websocket.service.ts - —Ç–∏–ø–∏–∑–∞—Ü–∏—è

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏—á–∏:
1. **–î–ª—è API**: –¥–æ–±–∞–≤—å –≤ controllers/ –∏ routes/
2. **–î–ª—è –ë–î**: –æ–±–Ω–æ–≤–∏ schema.prisma –∏ —Å–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏—é  
3. **–î–ª—è UI**: —Å–æ–∑–¥–∞–π –≤ pages/ –∏–ª–∏ features/
4. **–î–ª—è Redux**: –¥–æ–±–∞–≤—å —Å–ª–∞–π—Å –≤ features/

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm run install:all

# –ó–∞–ø—É—Å–∫ development
npm run backend:dev    # :3002
npm run frontend:dev   # :3003

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
cd backend && npm run prisma:migrate
cd backend && npm run prisma:studio
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- **Backend .env**: DATABASE_URL, JWT_SECRET, OPENAI_API_KEY, LEONARDO_API_KEY
- **Prisma**: tutor-game/backend/prisma/schema.prisma
- **Frontend**: Vite –Ω–∞—Å—Ç—Ä–æ–µ–Ω, proxy –Ω–∞ :3002 –¥–ª—è API

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

**–î–ª—è MVP (2-4 –Ω–µ–¥–µ–ª–∏)**:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –±–∞–≥–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
2. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é 
3. –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∫—É—Ä—Å–æ–≤
4. –£–ª—É—á—à–∏—Ç—å –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—é

**–î–ª—è –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (3-6 –º–µ—Å—è—Ü–µ–≤)**:
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏  
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫

---

**–°—Ç–∞—Ç—É—Å –Ω–∞ 05.01.2025**: –ï—Å—Ç—å —Ä–∞–±–æ—á–∏–π MVP —Å —á–∞—Ç–æ–º –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –º–µ—à–∞—é—Ç —Ä–∞–∑–≤–∏—Ç–∏—é. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏.

**–û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏**: üìä –°—Ä–µ–¥–Ω—è—è (–µ—Å—Ç—å —Ö–æ—Ä–æ—à–∞—è –±–∞–∑–∞, –Ω–æ –Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏)